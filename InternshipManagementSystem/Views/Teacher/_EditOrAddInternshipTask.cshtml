@model InternshipManagementSystem.Models.EditOrAddInternshipTaskViewModel

@{
    //string onSuccess = "InternshipTaskSubmitEndLoading(&quot;" + (ViewData["editInternshipTaskNo"].ToString() != "createInternshipTask" ? ViewData["editInternshipTasktNo"].ToString() : "addNewInternshipTask") + "&quot;)";
    string onStart = "InternshipTaskSubmitStartLoading(\"" + (ViewData["editInternshipTaskNo"].ToString() != "createInternshipTask" ? ViewData["editInternshipTaskNo"].ToString() : "addNewInternshipTask") + "\")";
    var anchorId = ViewData["editInternshipTaskNo"] + "DisplayTabContent";
}

<div class="panel-heading">
    @if (ViewData["editInternshipTaskNo"].ToString() != "createInternshipTask")
    {
        <span>Edit the internship task for 
            @{
                var lastClass = Model.internshipTask.Class_.Last();
                foreach (var c in Model.internshipTask.Class_)
                {
                    if (c != lastClass)
                    {
                        <strong>@c.ClassName,</strong>
                    }
                    else
                    {
                        <strong>@c.ClassName</strong>
                        }
                    }

                }
        </span>
        <a href="#@anchorId" data-toggle="tab" class="cancelLabelAnchor">
            <span class="label label-default cancelLabel">
                Cancel
            </span>
        </a>
                }
                else
                {
                    <span>Add new internship task</span>
                }
</div>
<div class="panel-body" id="@ViewData["editInternshipTaskNo"]">
    @using (Ajax.BeginForm("EditOrAddInternshipTask", "Teacher", null, new AjaxOptions { UpdateTargetId = "internshipTasks", HttpMethod = "POST", OnBegin = "ContractSubmitStartLoading(\"" + ViewData["editInternshipTaskNo"] + "\")" }, new { @class = "form-horizontal ", role = "form" }))
    {
        @Html.AntiForgeryToken()
        <table class="table">
            <tbody>
                <tr>
                    <td class="col-xs-3"><strong>Choose Class</strong></td>
                    <td class="col-xs-9">
                        @if (ViewData["editInternshipTaskNo"].ToString() == "createInternshipTask")
                        {
                            foreach (var class_ in Model.classes)
                            {
                                <label class="checkbox-inline"><input type="checkbox" Value="@class_.ClassName" name="Classes" />@class_.ClassName</label>
                                <input type="hidden" Value="true" name="isNewInternshipTask" />
                                <input type="hidden" Value="0" name="internshipTaskId" />
                            }
                        }
                        else
                        {
                            foreach (var class_ in Model.classes)
                            {
                                <span>@class_.ClassName</span>
                                <input type="hidden" Value="@class_.ClassName" name="Classes" />
                                <input type="hidden" Value="false" name="isNewInternshipTask" />
                                <input type="hidden" Value="@Model.internshipTask.InternshipTaskId" name="internshipTaskId" />
                            }
                        }
                    </td>
                </tr>
                <tr>
                    <td class="col-xs-3"><strong>Internship Task Detail</strong></td>
                    <td class="col-xs-9"><strong>@Html.TextAreaFor(m => m.internshipTask.InternshipTask1, new { @class = "form-control", rows = "10" })</strong></td>
                </tr>
            </tbody>
            <tbody>
                <tr>
                    <td></td>
                    <td class="col-xs-9">
                        <input type="submit" class="btn btn-default submitButton" style="margin-top: 10px" value="Submit" />&nbsp;
                        <img class="fakeLoader" src="~/Picture/loading.gif" style="margin-top: -19px" />
                        <span class="alert alert-danger failingAlert">Upload failed</span>
                    </td>
                </tr>
            </tbody>
        </table>
    }
</div>
